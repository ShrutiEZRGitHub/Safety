@page "/useractivitydashboard"
@using System.Globalization


<PageTitle>User Activity Dashboard</PageTitle>

<p class="title">User Activity Dashboard</p>

<RadzenCard class="bg-white shadow">
    <RadzenRow>
        <RadzenColumn Size="10" class="d-flex justify-content-around">
        <label class="d-flex justify-content-center" style="color: @labelColor[0];">
            <input type="radio" name="fontOptions" @onchange="() => ChangeFontToBold(0)" checked> &nbsp; Day
        </label>
        <label class="d-flex justify-content-center" style="color: @labelColor[1];">
            <input type="radio" name="fontOptions" @onchange="() => ChangeFontToBold(1)"> &nbsp; Week
        </label>
        <label class="d-flex justify-content-center" style="color: @labelColor[2];">
            <input type="radio" name="fontOptions" @onchange="() => ChangeFontToBold(2)"> &nbsp; Month
        </label>
        </RadzenColumn>

        <RadzenColumn Size="2" class="rz-px-10 border-start d-flex align-items-center">
            <i class="fa-solid fa-plus text-secondary"></i>
            <h6 class="text-secondary mb-0"> &nbsp; Custom Date</h6>
        </RadzenColumn>
    </RadzenRow>
</RadzenCard>

<br />

<RadzenCard class="shadow rounded rz-p-10">
    <RadzenChart>
        <RadzenAreaSeries Smooth="true" Data="@NewUsers" CategoryProperty="Week" Title="New Users" ValueProperty="Users"
            RenderingOrder="1">
        </RadzenAreaSeries>
        <RadzenAreaSeries Smooth="true" Data="@ActiveUsers" CategoryProperty="Week" Title="Active Users"
            LineType="LineType.Solid" ValueProperty="Users">
        </RadzenAreaSeries>
        <RadzenRow>
            <RadzenColumn Size="7"></RadzenColumn>
            <RadzenColumn>
                <RadzenColumn>
                    <div class="d-flex align-items-center">
                        <i class="fa-solid fa-user-group fa-xl"></i>
                        <h2 class="fw-bold">&nbsp;250</h2>
                    </div>
                    <h6 class="d-flex justify-content-start">Total Active Users</h6>
                </RadzenColumn>
            </RadzenColumn>
            <RadzenColumn>
                <RadzenColumn>
                    <div class="d-flex align-items-center">
                        <i class="fa-solid fa-user-group fa-xl"></i>
                        <h2 class="fw-bold">&nbsp;100</h2>
                    </div>
                    <h6 class="d-flex justify-content-start">Total New Users</h6>
                </RadzenColumn>
            </RadzenColumn>
            <RadzenColumn Size="2"></RadzenColumn>
        </RadzenRow>

        <br>
        <RadzenCategoryAxis Padding="20" Formatter="@FormatAsWeek" />
        <RadzenValueAxis Formatter="@FormatAsUSD">
            <RadzenGridLines Visible="true" />
            <RadzenAxisTitle Text="Users" />
            <RadzenLegend Visible="true" Position="LegendPosition.Top" />
        </RadzenValueAxis>
    </RadzenChart>
</RadzenCard>

<br />

<RadzenRow>
    <RadzenColumn class="shadow rounded rz-p-10">
        <h5 class="text-dark fw-bold">Heat Map</h5>
        @* <img src="_content/SharedUI/img/assests/heat-map.svg" /> *@

    </RadzenColumn>

    <!--Donut Chart-->
    <RadzenColumn Class="bg-white rounded shadow rz-p-10 ">
        <RadzenRow>
            <RadzenColumn Size="8">
                <RadzenChart>

                    @* Outer Donut Chart *@
                    <RadzenDonutSeries Data="@rev" CategoryProperty="Qtr" ValueProperty="Rev"
                        TotalAngle="360" StartAngle="360" Radius="140" InnerRadius="120">
                        <ChildContent>
                            <RadzenSeriesDataLabels Visible="@showDataLabels" />
                        </ChildContent>
                        <TitleTemplate>

                            @* Middle Donut Chart *@
                            <RadzenDonutSeries Data="@revI" CategoryProperty="QtrI" ValueProperty="RevI"
                                TotalAngle="360" StartAngle="360" Radius="110" InnerRadius="90">
                                <ChildContent>
                                    <RadzenSeriesDataLabels Visible="@sDL" />
                                </ChildContent>
                                <TitleTemplate>

                                    @* Center Donut Chart *@
                                    <RadzenDonutSeries Data="@revII" CategoryProperty="QtrII"
                                        ValueProperty="RevII" TotalAngle="360" StartAngle="360" Radius="80" InnerRadius="60">
                                        <ChildContent>
                                            <RadzenSeriesDataLabels Visible="@sDL3" />
                                        </ChildContent>
                                        <TitleTemplate>
                                            <div class="rz-donut-content">
                                                <div>90%</div>
                                            </div>
                                        </TitleTemplate>
                                    </RadzenDonutSeries>
                                </TitleTemplate>
                            </RadzenDonutSeries>
                        </TitleTemplate>
                    </RadzenDonutSeries>
                    <RadzenLegend Visible="false" />
                </RadzenChart>
            </RadzenColumn>

            <RadzenColumn Size="4">
                <div class="shadow p-3 rounded">
                    <h4 class="d-flex justify-content-center text-primary fw-bold">500</h4>
                    <h6 class="d-flex justify-content-center text-primary fw-bold">Registered Users</h6>
                </div>

                <br />

                <div class="shadow p-3 rounded">
                    <h4 class="d-flex justify-content-center text-success fw-bold">250</h4>
                    <h6 class="d-flex justify-content-center text-success fw-bold">Active Users</h6>
                </div>

                <br />

                <div class="shadow p-3 rounded">
                    <h4 class="d-flex justify-content-center text-primary fw-bold">75</h4>
                    <h6 class="d-flex justify-content-center text-primary fw-bold">New Users</h6>
                </div>
            </RadzenColumn>
        </RadzenRow>
    </RadzenColumn>
</RadzenRow>


@code {

    //filter data
    private string fontWeight = "normal";

    private string fontColor = "black";

    private string[] labelColor = { "blue", "black", "black" };

    private void ChangeFontToBold(int labelIndex)
    {
        ChangeFontProperties("bold", "Blue", labelIndex);

    }
    private void ChangeFontProperties(string weight, string color, int labelIndex)
    {
        fontWeight = weight;

        fontColor = color;

        for (int i = 0; i < labelColor.Length; i++)

        {
            labelColor[i] = labelIndex == i ? "blue" : "black";

        }
        StateHasChanged();
    }

    //Graph
    class DataItem
    {
        public string Week { get; set; }
        public double Users { get; set; }
    }

    string FormatAsUSD(object value)
    {
        return ((double)value).ToString("", CultureInfo.CreateSpecificCulture(""));
    }

    string FormatAsWeek(object value)
    {
        if (value != null)
        {
            return $"Week {value}";
        }

        return string.Empty;
    }

    DataItem[] NewUsers = new DataItem[] {
new DataItem { Week = "1", Users = 90 },
new DataItem { Week = "2", Users = 190 },
new DataItem { Week = "3", Users = 200 },
new DataItem { Week = "4", Users = 210 },
};

    DataItem[] ActiveUsers = new DataItem[] {
new DataItem { Week = "1", Users = 110 },
new DataItem { Week = "2", Users = 147 },
new DataItem { Week = "3", Users = 255 },
new DataItem { Week = "4", Users = 270 },
};


    //DONUT CHART
    bool showDataLabels = false;
   class DataItemI
    {
        public string Qtr { get; set; }
        public double Rev { get; set; }
    }

    DataItemI[] rev = new DataItemI[] {
new DataItemI{ Qtr = "Q1",Rev = 100}
};

    //Donut chartI
    bool sDL = false;
    class DataItemII
    {
        public string QtrI { get; set; }
        public double RevI { get; set; }
    }

    DataItemII[] revI = new DataItemII[] {
new DataItemII{ QtrI = "Q2",RevI = 80}
};

    //Donut chartI
    bool sDL3 = false;
    class DataItem3
    {
        public string QtrII { get; set; }
        public double RevII { get; set; }
    }

    DataItem3[] revII = new DataItem3[] {
new DataItem3{ QtrII = "Q3",RevII = 80}
};
}